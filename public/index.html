<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Animix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1530746307236266"
     crossorigin="anonymous"></script>
</head>
<body>
    <!-- Pantalla de Login -->
    <div class="container" id="login-container">
        <div class="form-container">
            <div class="form-header">
                <h2>chat animix</h2>
                <p>Ingresa para comenzar a chatear</p>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Usuario:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Contraseña:</label>
                    <input type="password" id="password" required>
                </div>
                
                <!-- Campo SSO para administradores -->
                <div class="form-group admin-token-group" id="admin-token-group">
                    <label for="admin-token">Token de Administrador:</label>
                    <input type="password" id="admin-token" placeholder="Ingresa tu token SSO">
                </div>
                <div class="form-group">
                    <input type="checkbox" id="admin-login">
                    <label for="admin-login" style="display: inline; margin-left: 5px;">Acceso Administrador</label>
                </div>
                
                <div class="form-group">
                    <input type="checkbox" id="remember-me">
                    <label for="remember-me" style="display: inline; margin-left: 5px;">Recordarme</label>
                </div>
                <button type="submit" class="btn">Iniciar Sesión</button>
            </form>
            <div class="form-footer">
                <p>¿No tienes cuenta? <a href="#" id="show-register">Regístrate</a></p>
            </div>
        </div>
    </div>
    
    <!-- Pantalla de Registro -->
    <div class="container hidden" id="register-container">
        <div class="form-container">
            <div class="form-header">
                <h2>Crear Cuenta</h2>
                <p>Completa el formulario para registrarte</p>
            </div>
            <form id="register-form">
                <div class="form-group">
                    <label for="reg-nickname">Apodo:</label>
                    <input type="text" id="reg-nickname" required>
                </div>
                <div class="form-group">
                    <label for="reg-username">Usuario:</label>
                    <input type="text" id="reg-username" required>
                </div>
                <div class="form-group">
                    <label for="reg-password">Contraseña:</label>
                    <input type="password" id="reg-password" required>
                </div>
                <div class="form-group">
                    <label for="reg-confirm">Confirmar Contraseña:</label>
                    <input type="password" id="reg-confirm" required>
                </div>
                <button type="submit" class="btn">Registrarse</button>
            </form>
            <div class="form-footer">
                <p>¿Ya tienes cuenta? <a href="#" id="show-login">Inicia Sesión</a></p>
            </div>
        </div>
    </div>
    
    <!-- Pantalla Principal del Chat -->
    <div class="chat-container hidden" id="chat-container">
        <!-- Admin Panel -->
        <div class="admin-panel" id="admin-panel">
            <div class="admin-header">
                <h2>Panel de Administración</h2>
                <button class="admin-close" id="admin-close">Cerrar Panel</button>
            </div>
            
            <div class="admin-section">
                <h3>Usuarios Registrados</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Apodo</th>
                            <th>Usuario</th>
                            <th>Rol</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="admin-user-list">
                        <!-- Usuarios se cargarán aquí -->
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3>Mensajes Reportados</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID Mensaje</th>
                            <th>Usuario</th>
                            <th>Contenido</th>
                            <th>Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="admin-message-list">
                        <!-- Mensajes se cargarán aquí -->
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3>Banear por IP</h3>
                <div class="admin-input-group">
                    <input type="text" class="admin-input" id="ban-ip-input" placeholder="Dirección IP">
                    <input type="text" class="admin-input" id="ban-reason-input" placeholder="Razón">
                    <button class="admin-submit" id="ban-ip-button">Banear IP</button>
                </div>
                
                <h4>IPs Baneadas</h4>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>IP</th>
                            <th>Razón</th>
                            <th>Fecha</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="banned-ip-list">
                        <!-- IPs baneadas se cargarán aquí -->
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3>Tokens SSO de Administrador</h3>
                <button class="admin-submit" id="generate-token-button">Generar Nuevo Token</button>
                <div id="token-result">
                    <p>Tu token SSO: <strong id="generated-token"></strong></p>
                    <p style="color: var(--danger-color); font-size: 0.9rem;">¡Guarda este token en un lugar seguro!</p>
                </div>
                
                <h4>Tokens Activos</h4>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Token</th>
                            <th>Fecha de Creación</th>
                        </tr>
                    </thead>
                    <tbody id="sso-token-list">
                        <!-- Tokens se cargarán aquí -->
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3>Registro de Moderación</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Moderador</th>
                            <th>Acción</th>
                            <th>Objetivo</th>
                            <th>Fecha</th>
                        </tr>
                    </thead>
                    <tbody id="moderation-log">
                        <!-- Registros se cargarán aquí -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Sidebar Overlay (para móviles) -->
        <div class="sidebar-overlay" id="sidebar-overlay"></div>
        
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="user-info">
                <div class="user-avatar" id="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <h3 id="current-user">Usuario</h3>
                    <p><span class="status-dot"></span> En línea</p>
                    <p class="user-id" id="current-user-id">ID: #0000</p>
                    <button class="logout-button" id="logout-button">Cerrar Sesión</button>
                </div>
                <div class="admin-badge hidden" id="admin-badge">ADMIN</div>
            </div>
            
            <div class="chat-rooms">
                <h3><i class="fas fa-comments room-icon"></i> Salas de Chat</h3>
                <ul class="room-list">
                    <li class="room-item active" data-room="general">
                        <i class="fas fa-globe-americas room-icon"></i> General
                    </li>
                    <li class="room-item" data-room="develop">
                        <i class="fas fa-code room-icon"></i> Desarrollo
                    </li>
                    <li class="room-item" data-room="business">
                        <i class="fas fa-chart-line room-icon"></i> Negocios
                    </li>
                    <li class="room-item" data-room="gaming">
                        <i class="fas fa-gamepad room-icon"></i> Gaming
                    </li>
                    <li class="room-item" data-room="music">
                        <i class="fas fa-music room-icon"></i> Música
                    </li>
                </ul>
            </div>
            
            <div class="online-users">
                <h3><i class="fas fa-users room-icon"></i> Usuarios en Línea</h3>
                <ul class="user-list" id="online-users">
                    <!-- Usuarios se cargarán dinámicamente -->
                </ul>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="chat-area">
            <div class="chat-header">
                <button class="menu-toggle" id="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="chat-title">
                    <i class="fas fa-globe-americas"></i> <span id="current-room">Sala General</span>
                </div>
                <div class="chat-actions">
                    <button class="admin-button hidden" id="admin-button">
                        <i class="fas fa-cog"></i> Panel Admin
                    </button>
                </div>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <!-- Messages will be inserted here dynamically -->
            </div>
            
            <div class="chat-input-area">
                <input type="text" class="message-input" id="message-input" placeholder="Escribe un mensaje...">
                <div class="action-buttons">
                    <button class="action-button">
                        <i class="fas fa-paperclip"></i>
                    </button>
                    <button class="action-button">
                        <i class="fas fa-smile"></i>
                    </button>
                </div>
                <button class="send-button" id="send-button">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
